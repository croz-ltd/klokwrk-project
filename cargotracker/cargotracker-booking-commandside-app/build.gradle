apply plugin: "org.springframework.boot"

// https://docs.gradle.org/current/userguide/upgrading_version_6.html#publishing_spring_boot_applications
configurations {
  [apiElements, runtimeElements].each {
    it.outgoing.artifacts.removeIf { it.buildDependencies.getDependencies(null).contains(jar) }
    it.outgoing.artifact(bootJar)
  }
}

springBoot {
  // Generates META-INF/build-info.properties, which contains (beside other things) version generated by jgitver gradle plugin. That version (and other data from build-info.properties) are than
  // available via BuildProperties bean at runtime.
  buildInfo()
}

dependencies {
  implementation project(":cargotracker:cargotracker-booking-axon-api")
  implementation project(":cargotracker:cargotracker-booking-boundary-api")
  implementation project(":cargotracker:cargotracker-booking-domain-model")
  implementation project(":infrastructure-library-jackson-springboot")
  implementation project(":cargotracker:cargotracker-lib-axon-api")
  implementation project(":cargotracker:cargotracker-lib-axon-logging")
  implementation project(":cargotracker:cargotracker-lib-axon-cqrs")
  implementation project(":infrastructure-project-boundary-api")
  implementation project(":cargotracker:cargotracker-lib-web")
  implementation project(":lang-groovy")

  implementation "org.axonframework:axon-spring-boot-starter"
  implementation "org.codehaus.groovy:groovy"
  implementation "org.springframework.boot:spring-boot-starter-actuator"
  implementation "org.springframework.boot:spring-boot-starter-web"
}
